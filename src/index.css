@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    @apply scroll-smooth;
  }
  
  body {
    @apply font-sans antialiased text-surface-800 dark:text-surface-100 bg-gradient-to-br from-surface-50 to-surface-100 dark:from-surface-900 dark:to-surface-800 min-h-screen;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-heading font-semibold tracking-wide;
   }
  
  h1 {
    @apply text-3xl md:text-4xl lg:text-5xl;
  }
  
  h2 {
    @apply text-2xl md:text-3xl lg:text-4xl;
  }
  
  h3 {
    @apply text-xl md:text-2xl lg:text-3xl;
  }
  
  h4 {
    @apply text-lg md:text-xl;
  }

  input, select, textarea {
    @apply block w-full px-4 py-3 text-surface-800 dark:text-surface-100 bg-white dark:bg-surface-800 border border-surface-200 dark:border-surface-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition duration-200;
  }

  button {
    @apply px-5 py-3 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  button.btn-primary {
    @apply bg-gradient-primary from-primary-start to-primary-end text-white hover:bg-gradient-primary hover:from-primary hover:to-primary-dark hover:shadow-md focus:ring-primary transform hover:-translate-y-0.5 transition-all;
  }

  button.btn-primary:active {
    @apply transform translate-y-0.5;
  }
  
  button.btn-secondary {
    @apply bg-secondary text-white hover:bg-secondary-dark focus:ring-secondary;
  }
  
  button.btn-outline {
    @apply border border-surface-300 dark:border-surface-600 bg-transparent hover:bg-surface-100 dark:hover:bg-surface-800 focus:ring-surface-500;
  }

  /* Card gradients */
  .card-gradient {
    @apply bg-gradient-card from-card-start to-card-end dark:from-surface-800 dark:to-card-dark-end;
  }

  .card-gradient-hover:hover {
    @apply bg-gradient-card from-white to-surface-100 dark:from-surface-700 dark:to-surface-800 shadow-md transition-all duration-300;
  }
}

@layer components {
  .repeat-badge {
    @apply inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary-light;
  }
  
  .interval-input {
    @apply w-20 px-2 py-1 text-sm border border-surface-300 dark:border-surface-700 rounded-md;
  }
  
  .reminder-badge {
    @apply inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-secondary/10 text-secondary dark:bg-secondary/20 dark:text-secondary-light;
  }

  /* Calendar styling for date input */
  input[type="date"] {
    @apply relative cursor-pointer border border-surface-300 dark:border-surface-700 rounded-lg;
    @apply transition-all duration-200 bg-white dark:bg-surface-800;
  }

  input[type="date"]:hover {
    @apply border-opacity-0 dark:border-opacity-0;
    @apply shadow-md;
    @apply bg-gradient-to-r from-primary-light via-primary to-primary-dark dark:from-surface-700 dark:via-surface-800 dark:to-surface-900;
    @apply bg-clip-padding p-[1px];
  }

  input[type="date"]:hover::before {
    @apply content-[''] absolute inset-[1px] bg-white dark:bg-surface-800 rounded-[7px] z-0;
  }

  input[type="date"]:focus {
    @apply outline-none border-opacity-0 dark:border-opacity-0;
    @apply shadow-md;
    @apply bg-gradient-to-r from-primary-light via-primary to-primary-dark dark:from-surface-700 dark:via-surface-800 dark:to-surface-900;
    @apply bg-clip-padding p-[1px];
  }

  input[type="date"]:focus::before {
    @apply content-[''] absolute inset-[1px] bg-white dark:bg-surface-800 rounded-[7px] z-0;
  }

  /* Target the calendar popup */
  input[type="date"]::-webkit-calendar-picker-indicator {
    @apply absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10;
  }

  /* Chrome, Safari, Edge calendar styling (limited support) */
  ::-webkit-datetime-edit {
    @apply px-3 py-1 relative z-[1];
  }

  ::-webkit-datetime-edit-fields-wrapper {
    @apply text-surface-800 dark:text-surface-100;
  }

  ::-webkit-datetime-edit-text {
    @apply text-primary dark:text-primary-light;
  }

  ::-webkit-datetime-edit-year-field,
  ::-webkit-datetime-edit-month-field,
  ::-webkit-datetime-edit-day-field {
    @apply font-medium;
  }
  
/* Enhanced Calendar Dropdown Styling */
/* Note: These styles primarily target Chrome/Edge browsers */
::-webkit-calendar-picker {
  @apply bg-gradient-calendar from-calendar-start via-calendar-mid to-calendar-end dark:bg-gradient-calendar-dark dark:from-calendar-dark-start dark:via-calendar-dark-mid dark:to-calendar-dark-end;
  @apply rounded-lg shadow-lg border-none;
  @apply overflow-hidden;
}

/* Calendar header styling */
::-webkit-calendar-picker-header {
  @apply bg-gradient-to-r from-primary-light to-primary dark:from-surface-700 dark:to-surface-900;
  @apply text-white font-medium py-2 px-3;
  @apply border-b border-surface-200 dark:border-surface-700;
}

/* Month and year dropdown in calendar */
::-webkit-calendar-picker-month-year {
  @apply text-white dark:text-surface-100 font-bold;
}

/* Day names (Mon, Tue, etc) */
::-webkit-calendar-picker-weekday-row {
  @apply bg-surface-100 dark:bg-surface-800;
  @apply text-surface-500 dark:text-surface-400;
  @apply text-xs font-medium;
  @apply py-1;
}

/* Navigation buttons (prev/next month) */
::-webkit-calendar-picker-nav-button {
  @apply text-white dark:text-surface-100;
  @apply hover:bg-white/20 dark:hover:bg-white/10;
  @apply rounded;
  @apply transition-colors duration-150;
}

/* Calendar grid */
::-webkit-calendar-picker-grid {
  @apply bg-white dark:bg-surface-800;
  @apply p-2;
}

/* Individual day cells */
::-webkit-calendar-picker-cell {
  @apply text-surface-800 dark:text-surface-100;
  @apply text-center rounded-full;
  @apply w-8 h-8 flex items-center justify-center;
  @apply hover:bg-gradient-to-r hover:from-primary-light hover:to-primary hover:text-white;
  @apply dark:hover:bg-gradient-to-r dark:hover:from-surface-700 dark:hover:to-surface-800 dark:hover:text-white;
  @apply transition-all duration-200;
}

/* Today's date styling */
::-webkit-calendar-picker-cell-today {
  @apply border-2 border-primary dark:border-primary-light;
  @apply border border-primary dark:border-primary-light;
  @apply text-primary dark:text-primary-light;
  @apply font-bold;
}

/* Selected date */
::-webkit-calendar-picker-cell-selected {
  @apply bg-gradient-to-r from-primary-light to-primary dark:from-primary-dark to-primary;
  @apply text-white font-bold;
  @apply shadow-md;
}

/* Improving the calendar container with a custom appearance */
input[type="date"] {
  position: relative;
}

/* Enhance the calendar appearance (this is applied when the dropdown is shown) */
input[type="date"]:in-range::-webkit-datetime-edit-fields-wrapper {
  @apply rounded-t-lg;
}

/* Add custom styling to date inputs */
input[type="date"]:focus {
  @apply bg-gradient-to-r from-primary-light via-primary to-primary-dark;
  @apply bg-clip-padding p-[1px];
  @apply border-opacity-0;
}

input[type="date"]:focus::before {
  @apply content-[''] absolute inset-[1px] bg-white dark:bg-surface-800 rounded-[7px] z-0;
}

/* Make sure the text remains visible and properly positioned */
input[type="date"]:focus::-webkit-datetime-edit {
  @apply relative z-[1] px-3 py-1;
}

/* Add shadow to the dropdown */
input[type="date"]::-webkit-calendar-picker-indicator:hover + ::-webkit-datetime-edit,
input[type="date"]:focus::-webkit-datetime-edit {
  @apply shadow-lg;
}

/* The dropdown trigger (small calendar icon) */
input[type="date"]::-webkit-calendar-picker-indicator {
  @apply cursor-pointer;
  @apply opacity-0; /* Hide the default icon */
  z-index: 10;
}

  .reminder-switch {
    @apply relative inline-flex h-6 w-11 items-center rounded-full bg-surface-300 dark:bg-surface-600 transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2;
  }
  
  .modal-backdrop {
    @apply fixed inset-0 bg-gradient-to-br from-black/40 to-black/60 dark:from-black/60 dark:to-black/80 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in;
  }
  .permissions-modal-backdrop {
    @apply fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 animate-fade-in;
  }
  
  .permissions-modal {
    @apply bg-white dark:bg-surface-800 rounded-lg shadow-lg max-w-md w-full mx-4 transform transition-all duration-300 animate-scale-in;
  }
  
  .permissions-modal-content {
    @apply p-6;
  }
  
  .permissions-modal-content h3 {
    @apply text-lg font-semibold mb-4 text-surface-900 dark:text-surface-100;
  }
  
  .permissions-modal-content p {
    @apply text-surface-700 dark:text-surface-300 mb-4;
  }
  
  .permissions-modal-buttons {
    @apply flex justify-end gap-3 mt-6;
  }
  
  .permissions-modal-closing {
    animation: fadeOut 0.3s ease-out forwards;
  }
  
  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }
  

@layer utilities {
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .task-item-enter {
    opacity: 0;
    transform: translateY(10px);
  }
  
  .task-item-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 300ms, transform 300ms;
  }
  
  .task-item-exit {
    opacity: 1;
  }
  
  .task-item-exit-active {
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 300ms, transform 300ms;
  }
  
  .animate-scale-in {
    animation: scaleIn 0.3s ease-out;
  }
  
  /* Kanban board styles */
  .kanban-container {
    @apply pb-4 gap-5;
    scroll-padding: 1rem;
  }
  
  .kanban-column {
    @apply flex flex-col min-w-[280px] h-fit;
    max-height: calc(100vh - 8rem);
  }
  
  .kanban-tasks {
    @apply flex-1 overflow-y-auto scrollbar-hide;
  }
  
  /* Hover and active states for draggable task cards */
  .task-card {
    @apply border border-transparent;
  }
  
  .task-card:hover {
    @apply border-surface-200 dark:border-surface-700 rounded-lg shadow-sm;
  }
  
  /* Style for tasks being dragged */
  .task-card-dragging {
    @apply shadow-lg border-primary dark:border-primary-light bg-white dark:bg-surface-800 opacity-90 rotate-1;
  }
  
  /* Drop target indicator */
  .kanban-drop-target {
    @apply border-2 border-dashed border-primary dark:border-primary-light bg-primary/5 dark:bg-primary-dark/10 rounded-lg;
  }
  
  /* Task category pills */
  .category-pill {
    @apply inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full;
  }
  
  /* Animations for drag and drop */
  @keyframes taskPulse {
    0% { 
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4);
    }
    70% {
      transform: scale(1.02);
      box-shadow: 0 0 0 10px rgba(79, 70, 229, 0);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(79, 70, 229, 0);
    }
  }
  
  /* Animation when a task is dropped in a new column */
  .task-card-dropped {
    animation: taskPulse 0.8s ease-out;
  }
  
  /* Enhanced animations for task details */
  .task-details-enter {
    max-height: 0;
    opacity: 0;
    transform: translateY(-10px);
  }
  
  .task-details-enter-active {
    max-height: 500px;
    opacity: 1;
    @apply relative;
    background-clip: padding-box;
  }

  .gradient-border::before {
    content: '';
    @apply absolute inset-0 rounded-lg -z-10 bg-gradient-to-r from-primary-light via-primary to-secondary opacity-0 transition-opacity duration-300;
  }

  .gradient-border:hover::before {
    @apply opacity-100;
  }

  /* Task card with gradient hover effect */
  .task-card-gradient {
    @apply bg-white dark:bg-surface-800 hover:bg-gradient-to-br hover:from-white hover:to-surface-50 dark:hover:from-surface-800 dark:hover:to-surface-700 transition-all duration-300;
  }

  /* Gradient text for highlights */
  .gradient-text {
    @apply text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary;
  }

  /* Animated gradient background */
  .animated-gradient {
    background: linear-gradient(270deg, var(--tw-gradient-stops));
    background-size: 200% 200%;
    animation: gradientMove 8s ease infinite;
  }

  @keyframes gradientMove {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }
  
  /* Optimized spacing for containers */
  .content-spacing {
    @apply px-5 py-6 md:px-6 md:py-8;
  }
  
  /* Fixed properties for task-details-enter-active that were split */
  .task-details-enter-active {
    transform: translateY(0);
    transition: max-height 300ms ease-out, opacity 300ms ease-out, transform 300ms ease-out;
    overflow: hidden;
  } 
}

/* Import React Toastify CSS */
@import 'react-toastify/dist/ReactToastify.css';

/* Gradients for UI elements - moved outside any layer to fix nesting */
.gradient-border {
  position: relative;
  background-clip: padding-box;
}

